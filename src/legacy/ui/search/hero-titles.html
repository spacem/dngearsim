<dnsim-loading>
<div class="row search-box">
    <div class="col-xs-12 col-md-8">
        <h3>
            hero titles
            <small *ngIf="buildName">percentages show adding to {{ $ctrl.buildName }}</small>
            <br />
            <small>Sort by:<br />
                <button class="btn btn-link" ng-click="$ctrl.sortByName = true;$ctrl.sort()">{{ 'name' | translate }}</button>
                <span ng-repeat="stat in $ctrl.useStats">
                    | <button class="btn btn-link" ng-click="$ctrl.switchSortStat(stat)">{{ stat.name }}</button>
                </span>
            </small>
        </h3>
    </div>
    <div class="col-xs-12 col-md-4 text-right">
        <div class="text-left">
            <input ng-change="$ctrl.changeSearch()" type="checkbox" ng-model="$ctrl.assigned"> {{'list assigned' | translate}}<br class="hidden-sm" />
            <input ng-change="$ctrl.changeSearch()" type="checkbox" ng-model="$ctrl.unassigned"> {{'list unassigned' | translate}}<br class="hidden-sm" />
            <input ng-change="$ctrl.changeSearch()" type="checkbox" ng-model="$ctrl.hideIgnored"> {{'hide ignored' | translate}}<br class="hidden-sm" />
        </div>
    </div>
    <div class="col-xs-12">
      <label>{{'seach by name:' | translate}}</label>
      <input ng-change="$ctrl.changeSearch()" type="text" class="form-control" ng-model="$ctrl.nameSearch" ng-model-options="{ debounce: 300 }" />
    </div>
    <div class="col-xs-12">
        assigning hero title stats gives these stats to all of your builds
    </div>
    <div class="col-xs-12">
        <div style="float:left;width: 140px">
            <span dnsim-stats stats="$ctrl.stats" filter="'dps'" separator="'<br />'" />
        </div>
        <div style="float:left">
            <span dnsim-stats stats="$ctrl.stats" filter="'def'" separator="'<br />'" />
        </div>
    </div>
</div>

<div class="row" infinite-scroll="$ctrl.showMoreResults()">
    <div class="col-xs-12 search-item" ng-repeat="result in $ctrl.displayTitles track by $index">
        <div class="row dnsim-card">
            <dngearsim-build-item item="result"></dngearsim-build-item>
            <div style="float: right">
                <div ng-repeat="stat in $ctrl.useStats" ng-if="result.affectAmounts[stat.id] > 0">
                    {{stat.name }}: +{{ result.affectAmounts[stat.id] }}%
                </div>
                <div class="text-right">
                    <button class="btn btn-default" ng-click="$ctrl.select(result.id)" ng-class="{ 'selected-button': $ctrl.isSelected(result.id) }">
                        <span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
                        Use
                    </button>
                    <button class="btn btn-default" ng-click="$ctrl.hide(result.id)" ng-class="{ 'selected-button': $ctrl.isHidden(result.id) }">
                        <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                        ignore
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row" ng-show="$ctrl.totalNumResults >= $ctrl.maxDisplay">
    <div class="col-xs-1"></div>
    <div class="col-xs-11">
        <button class="btn btn-link" ng-click="$ctrl.showMoreResults(20)">show more</button>
    </div>
</div>
<div class="row hidden-xs search-end"></div>
</dnsim-loading>